<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>07_函数中的this</title>
</head>
<body>
<!--
1. this是什么?
  * 一个关键字, 一个内置的引用变量
  * 在函数中都可以直接使用this
  * 在定义函数时, this还没有确定, 只有在执行时才动态确定(绑定)的
2. 如何确定this的值?
  * test()
  * obj.test()
  * new test()
  * test.call(obj)
前置知识:
  * 本质上任何函数在执行时都是通过某个对象调用的
-->
<script type="text/javascript">
  /*
    this是什么？
      - 被调用函数的当前对象
   */
  /*console.log(this); //window
  var test = function () {

  }


  function Person(color) {
    console.log(this)
    this.color = color;
    this.getColor = function () {
      console.log(this)
      return this.color;
    };
    this.setColor = function (color) {
      console.log(this)
      this.color = color;
    };
  }

  Person("red"); //this是谁?  window

  var p = new Person("yello"); //this是谁?  p

  p.getColor(); //this是谁?  p

  var obj = {};
  p.setColor.call(obj, "black"); //this是谁?  //obj

  var test = p.setColor;
  test(); //this是谁?  window

  function fun1() {
    function fun2() {
      console.log(this);
    }

    fun2(); //this是谁?  //window
  }
  fun1();*/

  function Person(name, age) {
    this.name = name;
    this.age = age;

    /*
    //1. 创建了一个空的对象
    var p = {};
    //2. 将实例对象的proto属性等于构造函数的prototype属性
    p.__proto__ = Person.prototype;
    //3. 构造函数调用call方法
    var result = Person.call(p, 'Bob', 18)
    // console.log(result);
    //4. 指定返回值
    return typeof result === 'object' ? result : p;
    */

    // return 123
  }
  Person.prototype.setName = function (name) {
    this.name = name;
  }

  var p = new Person('Bob', 18);
  console.log(p);
  // console.log(p.name, p.age);
  // p.setName('Jack')
  // console.log(p);


</script>
</body>
</html>